appId: ${APP_ID}
---
# Test: Forgot Password flow - request password reset email
# Verifies that user can request a password reset link

# Ensure clean state (logout if already logged in)
- runFlow: flows/setup-clean-state.yaml

# Navigate to Forgot Password screen
- tapOn:
    text: "Forgot Password?"
- waitForAnimationToEnd
- assertVisible:
    text: "Reset Password"

# Test 1: Empty email validation
- tapOn:
    id: "send-reset-link-button"
- waitForAnimationToEnd
- assertVisible:
    text: "Email is required"

# Test 2: Invalid email format
- tapOn:
    id: "forgot-email-input"
- inputText: "notanemail"
- hideKeyboard
- tapOn:
    id: "send-reset-link-button"
- waitForAnimationToEnd
- assertVisible:
    text: "Please enter a valid email address"

# Test 3: Valid email - should show success message
- tapOn:
    id: "forgot-email-input"
- eraseText
- inputText: ${email}
- hideKeyboard
- tapOn:
    id: "send-reset-link-button"
- waitForAnimationToEnd

# Give backend time to process
- runScript: scripts/wait.js

# Should show success message (password reset email sent)
# Note: The actual message may vary based on backend implementation
# We just verify no error is shown and button is clickable again
- assertVisible:
    id: "send-reset-link-button"
